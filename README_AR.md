# دليل استخدام Apex Dashboard

## نظرة عامة

**Apex Dashboard** هو تطبيق Frappe يوفر مركز مركزي لإدارة وعرض لوحات المعلومات المختلفة في نظام ERPNext الخاص بك. يتميز بواجهة مستخدم عصرية بأسلوب "Glass Apple" مع تأثيرات شفافة وتصميم أنيق.

---

## المكونات الرئيسية

### 1. **مركز لوحات المعلومات (Apex Dashboards Hub)**

الصفحة الرئيسية التي تعرض جميع لوحات المعلومات المتاحة، مجمعة حسب الفئات.

**الوصول:**
- من الشريط الجانبي: **Apex Dashboard** → **Apex Dashboards**
- أو مباشرة: `http://localhost:8000/app/apex_dashboards`

**الميزات:**
- عرض البطاقات مجمعة حسب الفئات (المالية، المخزون، الصيانة، إلخ)
- تصميم تفاعلي مع تأثيرات الحركة
- نظام ألوان ديناميكي لكل فئة

---

### 2. **لوحة السيولة (Liquidity Dashboard)**

لوحة معلومات متخصصة لعرض السيولة المالية من حسابات البنوك والنقدية.

**الميزات الرئيسية:**

#### أ. **تجميع الحسابات**
- يمكن تجميع حسابات متعددة تحت اسم بنك واحد
- عرض الأرصدة بعملات مختلفة (EGP, USD, EUR, إلخ)
- تحويل تلقائي لجميع العملات إلى الجنيه المصري

#### ب. **أسعار الصرف الحية**
- تكامل مع OpenExchangeRates API للحصول على أسعار صرف محدثة
- نظام احتياطي يستخدم أسعار ERPNext في حالة فشل API
- تخزين مؤقت للأسعار لمدة ساعة واحدة

#### ج. **واجهة تفاعلية**
- بطاقات قابلة للطي (Accordion) لكل بنك
- عرض التفاصيل: العملة، الرصيد، سعر الصرف، القيمة بالجنيه
- إجمالي السيولة في أعلى الصفحة

---

## الإعداد والتكوين

### الخطوة 1: إعداد أسعار الصرف

1. انتقل إلى: **Currency Settings**
2. أدخل **OpenExchangeRates App ID** (اختياري)
   - للحصول على مفتاح API مجاني: [openexchangerates.org](https://openexchangerates.org/)
3. احفظ الإعدادات

### الخطوة 2: إعداد لوحة السيولة

1. انتقل إلى: **Liquidity Dashboard Config**
2. أضف صفوف في جدول **Accounts**:
   - **Account**: اختر الحساب من دليل الحسابات
   - **Bank Name**: اسم البنك (اختياري - للتجميع)
   - **Color Theme**: اختر لون البطاقة

**طريقتان للتجميع:**

#### الطريقة الأولى (موصى بها): استخدام الحساب الأب
- اختر الحساب الأب الذي يحتوي على جميع الحسابات الفرعية
- مثال: اختر "CIB Banks" الذي يحتوي على (CIB EGP, CIB USD, CIB EUR)
- سيتم جلب جميع الحسابات الفرعية تلقائياً

#### الطريقة الثانية: التجميع اليدوي
- أضف صف منفصل لكل حساب
- استخدم نفس **Bank Name** بالضبط لجميع الحسابات التي تريد تجميعها
- مثال: أضف 3 صفوف (CIB EGP, CIB USD, CIB EUR) وضع "CIB" في Bank Name للثلاثة

### الخطوة 3: تخصيص أسماء الحسابات

لتمييز الحسابات المتشابهة (مثل 4 حسابات EGP مختلفة):

1. افتح **Chart of Accounts** أو **Account List**
2. افتح الحساب المطلوب
3. أدخل اسم مختصر في حقل **Dashboard Label**
   - مثال: "CIB Main", "CIB Alex", "CIB Branch 1"
4. احفظ
5. سيظهر هذا الاسم المختصر في لوحة المعلومات بدلاً من الاسم الكامل

---

## إدارة الفئات

### عرض الفئات الموجودة

1. من الشريط الجانبي: **Apex Dashboard** → **Categories**
2. ستظهر قائمة بجميع الفئات (Finance, CRM, Inventory, Maintenance)

### إضافة فئة جديدة

1. اضغط **Add Apex Dashboard Category**
2. أدخل:
   - **Category Name**: اسم الفئة (مثل: "HR", "Sales")
   - **Icon**: رمز FontAwesome (مثل: `fa fa-users`) أو SVG
   - **Sort Order**: ترتيب العرض (رقم)
3. احفظ

### إضافة لوحة معلومات جديدة

**الطريقة الأسهل (جديد!):**
1. افتح صفحة **Apex Dashboards** الرئيسية
2. في الأعلى، اضغط على زر **"Add Dashboard"**
3. املأ البيانات:
   - **Title**: عنوان اللوحة
   - **Category**: اختر الفئة
   - **Route**: المسار (مثل: `liquidity-dashboard`)
   - **Icon**: رمز FontAwesome (مثل: `fa fa-chart-line`)
   - **Is Active**: ✓ لإظهارها في المركز
4. احفظ

**ملاحظة:** يوجد أيضاً زر **"Manage Categories"** لإدارة الفئات مباشرة من نفس الصفحة.

---

## نصائح الاستخدام

### 1. **تحديث البيانات**
- اضغط زر **Refresh** في لوحة السيولة لتحديث الأرصدة
- يتم تحديث أسعار الصرف تلقائياً كل ساعة

### 2. **الألوان المتاحة**
- **Purple**: بنفسجي فاتح
- **Blue**: أزرق فاتح (مناسب لـ CIB)
- **Gold**: ذهبي (مناسب لـ AAIB)
- **Lime**: أخضر ليموني
- **Gray**: رمادي (افتراضي)

### 3. **التنقل**
- من أي لوحة معلومات، اضغط زر **Hub** للعودة إلى المركز
- من المركز، اضغط على أي بطاقة للانتقال إلى اللوحة

### 4. **الأمان**
- جميع اللوحات محمية بصلاحيات Frappe
- فقط **System Manager** يمكنه إدارة الفئات والإعدادات
- يمكن تخصيص الصلاحيات لكل لوحة على حدة

---

## ملاحظات إضافية

- **للمشاكل الشائعة وحلولها:** راجع ملف [`TROUBLESHOOTING_AR.md`](TROUBLESHOOTING_AR.md)
- **للتفاصيل التقنية:** راجع ملف [`README.md`](README.md)

---

## الترخيص

هذا التطبيق مرخص تحت MIT License.
